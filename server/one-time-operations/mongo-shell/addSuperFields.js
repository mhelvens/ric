'use strict';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var mongo = new Mongo();
var db = mongo.getDB("ric");

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var c;
var e;
var id;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//// fetch all entities

var entities = {};

c = db.entities.find();
while (c.hasNext()) {
	e = c.next();

	if (e.sub) {
		for (var i = 0; i < e.sub.length; ++i) {

			db.entities.update({ _id: e.sub[i].entity }, { $addToSet: { super: e._id } });

		}
	}


}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
